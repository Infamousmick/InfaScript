#!/bin/bash

#Define Text Coloring
# Color escape sequences
txtund='\e[4m'    # Underline
txtbld='\e[1m'    # Bold
txtred='\e[31m'   # Red
txtgrn='\e[32m'   # Green
txtylw='\e[33m'   # Yellow
txtblu='\e[34m'   # Blue
txtpur='\e[35m'   # Purple
txtcyn='\e[36m'   # Cyan
txtwht='\e[37m'   # White
txtblk='\e[30m'   # Black
txtgry='\e[90m'   # Gray
# Additional text attributes
txtdim='\e[2m'    # Dim
txtrev='\e[7m'    # Reverse
txtstnd='\e[0m'   # Standout (reset)
# Blinking, Inverse, and Background styles
txtblink='\e[5m'       # Blinking
txtinv='\e[7m'         # Inverse (swap foreground and background)
txtbgred='\e[41m'      # Red background
txtbggrn='\e[42m'      # Green background
txtbgylw='\e[43m'      # Yellow background
txtbgblu='\e[44m'      # Blue background
txtbgpur='\e[45m'      # Purple background
txtbgcyn='\e[46m'      # Cyan background
txtbgwht='\e[47m'      # White background
txtbgblk='\e[40m'      # Black background
txtbggry='\e[100m'     # Gray background
# Reset background
txtbgrst='\e[0m'

# Function to prompt for exit confirmation
exit_a() {
    echo -e "
    \033[41mDo you want to exit? (1=YES, 2=NO)"
    echo "Enter your choice : \033[44m\n"
    read -r input
    case $input in
        1)
            echo -e "
            \033[41mPress ENTER to exit"
            read -r a
            exit 0
            ;;
        2)
            echo -e "
            \033[41mPress ENTER to return to START"
            read -r a
            start
            ;;
        *)
            echo "
            Choose a valid option, press ENTER to continue..."
            read -r a
            exit_a
            ;;
    esac
}

# Function to run adb preset commands
adbC() {
    echo "
    Are you sure to run Adb Preset Commands? (1=YES, 2=NO)"
    echo "Enter your choice : "
    read -r input
    case $input in
        1)
            su user -c /bin/AdbCommands.sh
            ;;
        2)
            start
            ;;
        *) 
            echo "
            Choose a valid option, press ENTER to continue..."
            read -r a
            adbC
            ;;
    esac
}

# Function for GMS operations
gms_a() {
    echo "
    What do you want to run?
    1. GMS Disabler
    2. GMS Enabler
    3. Start
    4. Exit"
    echo "Enter your choice : "
    read -r input
    case $input in
        1)
            echo "
            Are you sure to run GMS Disabler? (1=YES, 2=NO)"
            read -r answ
            if [ "$answ" -eq 1 ]; then
                ./bin/GmsDisabler.sh
            elif [ "$answ" -eq 2 ]; then
                gms_a
            else
                echo "
                Choose a valid option, press ENTER to continue..."
                read -r a
                gms_a
            fi
            ;;
        2)
            echo "
            Are you sure to run GMS Enabler? (1=YES, 2=NO)"
            read -r answ
            if [ "$answ" -eq 1 ]; then
                ./bin/GmsEnabler.sh
            elif [ "$answ" -eq 2 ]; then
                gms_a
            else
                echo "
                Choose a valid option, press ENTER to continue..."
                read -r a
                gms_a
            fi
            ;;
        3)
            start
            ;;
        4)
            exit_a
            ;;
        *)
            ;;
    esac
}

# Function to boost performance
boostp() {
    echo "
    Are you sure to run Boost Performance? (1=YES, 2=NO)"
    echo "Enter your choice : "
    read -r input
    case $input in
        1)
            clear
            echo -e "
            ################## Boost Performance ##################
            Run this command once a week...
            Running Performance optimizations command...\n"
            sleep 2
            cmd package compile -m speed-profile -a
            clear
            echo "
            ######################## FINISH #######################
            Press ENTER to continue..."
            read -r a
            start
            ;;
        2)
            start
            ;;
        *)
            echo "
            Choose a valid option, press ENTER to continue..."
            read -r a
            boostp
            ;;
    esac
}

# Function to boost battery
boostb() { 
    echo "
    Are you sure to run Boost Battery? (1=YES , 2=NO)
    "
    echo "Enter your choice : "
    read -r input
    case $input in
    1)  
    clear
    echo "
    #################### Boost Battery ####################
    To run this command plug keep your phone in charging and be sure it is at 100%, otherwise the script will FAIL!!!!
    Run this commands once a month...
    Running Battery Boost command..."
    read -r a
    cmd package bg-dexopt-job
    echo "
    ######################## FINISH #######################
    Press ENTER to continue..."
    read -r a
    start
    ;;
    2)
    start
    ;;
    *)
    echo "
    Choose a valid option, press ENTER to continue..."
    read -r a
    boostb
    ;;
    esac

}

cache() {
    echo "
    Are you sure to run Clear cache..? (1=YES , 2=NO)
    "
    echo "Enter your choice : "
    read -r input
    case $input in
    1)
    su user -c /bin/Cache.sh
    ;;
    2)
    start
    ;;
    *)
    echo "
    Choose a valid option, press ENTER to continue..."
    read -r a
    cache
    esac
   
}

reboot() {
    echo "
    Are you sure to run Reboot Menu? (1=YES , 2=NO)
    "
    echo "Enter your choice : "
    read -r input
    case $input in
    1)
    ./bin/RebootMenu.sh
    ;;
    2)
    start
    ;;
    *)
    echo "
    Choose a valid option, press ENTER to continue..."
    read -r a
    reboot
    esac
   
}

start() {
    echo -e "
    \033[1m\033[40m\033[34m
    ############# INFASCRIPT SUPERUSER #############\033[37m
    Choose what to do:
    1. ADB Preset Menu
    2. GMS Disabler/Enabler
    3. Boost Performance
    4. Boost Battery
    5. Clear Cache
    6. Reboot Menu
    \033[1;31m7. Exit
 \033[34m################################################\033[37m
    \033[35mAnswer: \033[37m"
    read -r answer
}

while true; do
    start
    case $answer in
        1)
            adbC
            ;;
        2)
            gms_a
            ;;
        3)
            boostp
            ;;
        4)
            boostb
            ;;
        5)
            cache
            ;;
        6)
            reboot
            ;;
        7)
            exit_a
            ;;
        *)   
            echo "
            Choose a valid option, press ENTER to continue..."
            read -r a
            start
            ;;
    esac
done
